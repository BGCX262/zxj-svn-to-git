<?xml version="1.0" encoding="ISO-8859-1"?>
<pageflow>
	<name>zXLckdEntts</name>
	<helpid>zXLckdEntts_helpid</helpid>
	<htmldebug>zOff</htmldebug>
	<startaction>query</startaction>
	<propagateqs>zYes</propagateqs>
	<lastchange><![CDATA[C1.4:67 DGS15APR2005 - can now handle a locked 'entity' that is not a bo descriptor name]]></lastchange>
	<comment><![CDATA[Show locked entities (zXLck table) and allow user to delete lock]]></comment>
	<baseurl>
		<url><![CDATA[../jsp/zXGPF.jsp]]></url>
		<urltype>zFixed</urltype>
	</baseurl>
	<actions>
		<action type="zQuery">
			<helpid>zXLckdEntts_query_helpid</helpid>
			<name>query</name>
			<left>0</left>
			<top>0</top>
			<link>
				<action><![CDATA[list]]></action>
				<querystring>
					<item>
						<source><![CDATA[1]]></source>
						<destination><![CDATA[-pg]]></destination>
					</item>
				</querystring>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<entities>
				<item>
					<name>zXLck</name>
					<entity><![CDATA[zXLck]]></entity>
					<pk>#qs.-pk</pk>
					<wheregroup>Search</wheregroup>
					<selecteditgroup><![CDATA[All]]></selecteditgroup>
					<selectlistgroup>All</selectlistgroup>
					<listgroup><![CDATA[Description]]></listgroup>
					<resolvefk>zNo</resolvefk>
					<allownew>zYes</allownew>
				</item>
			</entities>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<resolvefk>zYes</resolvefk>
			<distinct>zNo</distinct>
			<searchform>zNo</searchform>
			<outerjoin>zNo</outerjoin>
			<whereclauseonly>zNo</whereclauseonly>
			<querytype>zAll</querytype>
		</action>
		<action type="zListForm">
			<helpid>zXLckdEntts_list_helpid</helpid>
			<name>list</name>
			<title>
				<EN><![CDATA[Current Locks]]></EN>
			</title>
			<entityaction>query</entityaction>
			<left>0</left>
			<top>0</top>
			<link>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<refs>
				<item>
					<name>zBack</name>
					<startsubmenu>zNo</startsubmenu>
					<url>
						<url><![CDATA[zXMMShow('#qs.-s#')]]></url>
						<urltype>zFixed</urltype>
						<frameno>notouch</frameno>
					</url>
				</item>
			</refs>
			<resolvefk>zNo</resolvefk>
			<width>100%</width>
			<qsentity>-e</qsentity>
			<qspk>-pk</qspk>
			<maxrows>150</maxrows>
			<autocheck>zNo</autocheck>
			<multilist>zNo</multilist>
			<addparitytoclass>zYes</addparitytoclass>
			<url>
				<url><![CDATA[lockDetails]]></url>
				<urltype>zAction</urltype>
			</url>
			<resorturl>
				<url><![CDATA[list]]></url>
				<urltype>zAction</urltype>
			</resorturl>
			<pagingurl>
				<url><![CDATA[list]]></url>
				<urltype>zAction</urltype>
			</pagingurl>
		</action>
		<action type="zEditForm">
			<helpid>zXLckdEntts_lockDetails_helpid</helpid>
			<name>lockDetails</name>
			<title>
				<EN><![CDATA[Lock Details]]></EN>
			</title>
			<left>0</left>
			<top>0</top>
			<link>
				<action><![CDATA[#expr.if(eq(script(bo.quickload(bo.attr('zXLck', 'entty'), 'entity', bo.attr('zXLck', 'pk'))), 2), 'lockedNonEntity', 'lockedEntity')]]></action>
				<querystring>
					<item>
						<source><![CDATA[#attrvalue.zXLck.entty]]></source>
						<destination><![CDATA[-e]]></destination>
					</item>
					<item>
						<source><![CDATA[#attrvalue.zXLck.pk]]></source>
						<destination><![CDATA[-pk.entity]]></destination>
					</item>
				</querystring>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<entities>
				<item>
					<name>zxLck</name>
					<entity><![CDATA[zXLck]]></entity>
					<pk>#qs.-pk</pk>
					<wheregroup>Search</wheregroup>
					<selecteditgroup><![CDATA[*]]></selecteditgroup>
					<selectlistgroup>All</selectlistgroup>
					<lockgroup>*</lockgroup>
					<visiblegroup>lockDetails</visiblegroup>
					<listgroup><![CDATA[Description]]></listgroup>
					<resolvefk>zNo</resolvefk>
					<allownew>zYes</allownew>
				</item>
			</entities>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<editformtype>normal</editformtype>
		</action>
		<action type="zEditForm">
			<helpid>zXLckdEntts_lockedEntity_helpid</helpid>
			<name>lockedEntity</name>
			<title>
				<EN><![CDATA[Locked Entity '#entitylabel#']]></EN>
			</title>
			<left>0</left>
			<top>0</top>
			<link>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<entities>
				<item>
					<name>entity</name>
					<entity><![CDATA[#qs.-e]]></entity>
					<pk>#qs.-pk.entity</pk>
					<wheregroup>Search</wheregroup>
					<selecteditgroup><![CDATA[Description]]></selecteditgroup>
					<selectlistgroup>All</selectlistgroup>
					<lockgroup>Description</lockgroup>
					<listgroup><![CDATA[Description]]></listgroup>
					<resolvefk>zNo</resolvefk>
					<allownew>zYes</allownew>
				</item>
			</entities>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<refs>
				<item>
					<name>zBack</name>
					<startsubmenu>zNo</startsubmenu>
					<url>
						<url><![CDATA[list]]></url>
						<urltype>zAction</urltype>
					</url>
				</item>
				<item>
					<name>REMOVE</name>
					<startsubmenu>zNo</startsubmenu>
					<url>
						<url><![CDATA[deleteLock]]></url>
						<urltype>zAction</urltype>
					</url>
					<label>
						<EN><![CDATA[Remove lock]]></EN>
					</label>
					<confirm>
						<EN><![CDATA[Are you sure you want to remove this lock?]]></EN>
					</confirm>
				</item>
			</refs>
			<editformtype>normal</editformtype>
		</action>
		<action type="zEditForm">
			<helpid>zXLckdEntts_lockedNonEntity_helpid</helpid>
			<name>lockedNonEntity</name>
			<title>
				<EN><![CDATA[Locked Entity '#qs.-e#']]></EN>
			</title>
			<left>0</left>
			<top>0</top>
			<link>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<entities>
				<item>
					<name>zXLck</name>
					<entity><![CDATA[zXLck]]></entity>
					<pk>#qs.-pk</pk>
					<wheregroup>Search</wheregroup>
					<selecteditgroup><![CDATA[entty,pk]]></selecteditgroup>
					<selectlistgroup>+,Description</selectlistgroup>
					<lockgroup>entty,pk</lockgroup>
					<listgroup><![CDATA[Description]]></listgroup>
					<resolvefk>zNo</resolvefk>
					<allownew>zNo</allownew>
				</item>
			</entities>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<refs>
				<item>
					<name>zBack</name>
					<startsubmenu>zNo</startsubmenu>
					<url>
						<url><![CDATA[list]]></url>
						<urltype>zAction</urltype>
					</url>
				</item>
				<item>
					<name>REMOVE</name>
					<startsubmenu>zNo</startsubmenu>
					<url>
						<url><![CDATA[deleteLock]]></url>
						<urltype>zAction</urltype>
					</url>
					<label>
						<EN><![CDATA[Remove lock]]></EN>
					</label>
					<confirm>
						<EN><![CDATA[Are you sure you want to remove this lock?]]></EN>
					</confirm>
				</item>
			</refs>
			<editformtype>normal</editformtype>
		</action>
		<action type="zDBAction">
			<helpid>zXLckdEntts_deleteLock_helpid</helpid>
			<name>deleteLock</name>
			<left>0</left>
			<top>0</top>
			<link>
				<action><![CDATA[list]]></action>
			</link>
			<formaction>
				<urltype>zAction</urltype>
			</formaction>
			<entities>
				<item>
					<name>zXLck</name>
					<entity><![CDATA[zXLck]]></entity>
					<pk>#qs.-pk</pk>
					<wheregroup>Search</wheregroup>
					<selecteditgroup><![CDATA[All]]></selecteditgroup>
					<selectlistgroup>All</selectlistgroup>
					<listgroup><![CDATA[Description]]></listgroup>
					<resolvefk>zNo</resolvefk>
					<allownew>zYes</allownew>
				</item>
			</entities>
			<stickyqsaction></stickyqsaction>
			<cached>zNo</cached>
			<dbactionentity>zXLck</dbactionentity>
			<reset>zYes</reset>
			<setautomatics>zYes</setautomatics>
			<dbactioninfomsg>
				<EN><![CDATA[Lock Removed]]></EN>
			</dbactioninfomsg>
			<dbactionerrormsg>
				<EN><![CDATA[Unable to remove lock]]></EN>
			</dbactionerrormsg>
			<dbactiontype>zDelete</dbactiontype>
			<erroraction>
				<action><![CDATA[lockDetails]]></action>
			</erroraction>
		</action>
	</actions>
</pageflow>
